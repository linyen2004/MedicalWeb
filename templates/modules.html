{% extends "base.html" %}
{% block content %}
<h2>Modules</h2>
{% if user.role == "patient" %}
    <ul>
    {% for module in modules %}
        <li>{{ module }}</li>
    {% endfor %}
    </ul>
{% elif user.role == "doctor" %}
    {% for patient in patients %}
        <h3>{{ patient }}</h3>
        {% set patient_modules = modules.get(patient, []) %}
        {% if patient_modules %}
        <ul>
        {% for module in patient_modules %}
            <li>{{ module }}</li>
        {% endfor %}
        </ul>
        {% else %}
        <p>No modules for {{ patient }}</p>
        {% endif %}
    {% endfor %}
{% endif %}
{% endblock %}
